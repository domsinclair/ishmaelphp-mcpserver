<?php require __DIR__ . "/vendor/autoload.php"; use Ishmael\McpServer\Project\ProjectContext; use Ishmael\McpServer\Support\RouteCollector; use Ishmael\McpServer\Project\PathSandbox; $root = getcwd(); $sandbox = new PathSandbox($root); $ctx = new ProjectContext($root, $sandbox, []); $collector = new RouteCollector($ctx); try { $routes = $collector->collect(); fwrite(STDERR, "[routes_check] root=" . ($ctx->getRoot() ?? "NULL") . "\n"); fwrite(STDERR, "[routes_check] collected=" . count($routes) . "\n"); echo json_encode(["routes" => $routes], JSON_UNESCAPED_SLASHES|JSON_PRETTY_PRINT), "\n"; } catch (Throwable $e) { fwrite(STDERR, "[routes_check] EXC " . $e->getMessage() . "\n"); fwrite(STDERR, $e->getTraceAsString() . "\n"); }
